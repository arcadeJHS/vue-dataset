!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).VueDataset={})}(this,(function(t){"use strict";var e={show:"Show",entries:"entries",previous:"Previous",next:"Next",showing:"Showing",showingTo:"to",showingOf:"of",showingEntries:"entries"};function s(t){for(var e in t)return!1;return!0}function n(t,e,s,n,r,i,o,a,d,u){"boolean"!=typeof o&&(d=a,a=o,o=!1);const c="function"==typeof s?s.options:s;let h;if(t&&t.render&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0,r&&(c.functional=!0)),n&&(c._scopeId=n),i?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,d(t)),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=h):e&&(h=o?function(t){e.call(this,u(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),h)if(c.functional){const t=c.render;c.render=function(e,s){return h.call(s),t(e,s)}}else{const t=c.beforeCreate;c.beforeCreate=t?[].concat(t,h):[h]}return s}var r={provide:function(){var t=this;return{search:this.search,showEntries:this.showEntries,setActive:this.setActive,datasetI18n:this.datasetI18n,rdsIndexes:function(){return t.indexes},rdsData:function(){return t.dsData},rdsRows:function(){return t.dsRows},rdsPages:function(){return t.dsPages},rdsResultsNumber:function(){return t.dsResultsNumber},rdsPagecount:function(){return t.dsPagecount},rdsFrom:function(){return t.dsFrom},rdsTo:function(){return t.dsTo},rdsPage:function(){return t.dsPage}}},props:{dsData:{type:Array,default:function(){return[]}},dsFilterFields:{type:Object,default:function(){return{}}},dsSortby:{type:Array,default:function(){return[]}},dsSearchIn:{type:Array,default:function(){return[]}},dsSearchAs:{type:Object,default:function(){return{}}},dsSortAs:{type:Object,default:function(){return{}}}},data:function(){return{dsPage:1,dsSearch:"",dsShowEntries:10,datasetI18n:e,indexes:[]}},computed:{whenChanged:function(){return this.dsData,this.dsSearch,this.dsSortby,this.dsFilterFields,this.dsSearchIn,this.dsSearchAs,this.dsSortAs,Date.now()},dsRows:function(){return this.indexes.slice(this.dsFrom,this.dsTo)},dsPages:function(){return function(t,e){var s,n=[],r=[];if(n.push(1),t<=1)return n;for(var i=e-2;i<=e+2;i++)i<t&&i>1&&n.push(i);n.push(t);for(var o=0;o<n.length;o++)s&&(n[o]-s==2?r.push(s+1):n[o]-s!=1&&r.push("...")),r.push(n[o]),s=n[o];return r}(this.dsPagecount,this.dsPage)},dsResultsNumber:function(){return this.indexes.length},dsPagecount:function(){return Math.ceil(this.dsResultsNumber/this.dsShowEntries)},dsFrom:function(){return(this.dsPage-1)*this.dsShowEntries},dsTo:function(){return this.dsPage*this.dsShowEntries}},watch:{dsResultsNumber:{handler:function(t,e){this.setActive(1)}},whenChanged:{handler:function(t,e){var n=[],r=this.dsData,i=this.dsSearch,o=this.dsSortby,a=this.dsFilterFields,d=this.dsSearchIn,u=this.dsSearchAs,c=this.dsSortAs;i||o.length||!s(a)?(n=r.map((function(t,e){return{index:e,value:t}})),s(a)||(n=function(t,e){var s=function(s){t=t.filter((function(t){var n=t.value;for(var r in n)if(r===s){if("function"==typeof e[s])return e[s](n[r]);if(""===e[s])return!0;if(n[r]===e[s])return!0}return!1}))};for(var n in e)s(n);return t}(n,a)),i&&(n=n.filter((function(t){return function(t,e,s,n){for(var r in n=String(n).toLowerCase(),s)if(0===t.length||-1!==t.indexOf(r)){var i=String(s[r]).toLowerCase();for(var o in e)if(o===r&&"function"==typeof e[o]){var a=e[o](i,n,s);if(!0===a)return a}if(i.indexOf(n)>=0)return!0}return!1}(d,u,t.value,i)}))),o.length&&n.sort(function(t,e){void 0===e&&(e={});var s,n=[],r=t.length;return t=t.map((function(t,e){return"-"===t[0]?(n[e]=-1,t=t.substring(1)):n[e]=1,t})),function(i,o){for(s=0;s<r;s++){var a=t[s],d=e[a]?e[a](i.value[a]):i.value[a],u=e[a]?e[a](o.value[a]):o.value[a];if(d>u)return n[s];if(d<u)return-n[s]}return 0}}(o,c)),n=n.map((function(t){return t.index}))):n=r.map((function(t,e){return e})),this.indexes=n},immediate:!0}},methods:{search:function(t){this.dsSearch=t},showEntries:function(t){var e=this,s=this.dsPages;this.dsShowEntries=t,this.$nextTick((function(){var t=e.dsPages;t.length<s.length&&e.setActive(t[t.length-1])}))},setActive:function(t){this.dsPage=t}}},i=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",[t._t("default",null,{ds:{dsIndexes:t.indexes,dsShowEntries:t.dsShowEntries,dsResultsNumber:t.dsResultsNumber,dsPage:t.dsPage,dsPagecount:t.dsPagecount,dsFrom:t.dsFrom,dsTo:t.dsTo,dsData:t.dsData,dsRows:t.dsRows,dsPages:t.dsPages,search:t.search,showEntries:t.showEntries,setActive:t.setActive}})],2)};i._withStripped=!0;var o=n({render:i,staticRenderFns:[]},void 0,r,void 0,!1,void 0,!1,void 0,void 0,void 0),a={inject:["datasetI18n","rdsResultsNumber","rdsFrom","rdsTo"],computed:{showing:function(){return 0!==this.dsResultsNumber?this.dsFrom+1:0},showingTo:function(){return this.dsTo>=this.dsResultsNumber?this.dsResultsNumber:this.dsTo},dsResultsNumber:function(){return this.rdsResultsNumber()},dsFrom:function(){return this.rdsFrom()},dsTo:function(){return this.rdsTo()}}},d=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",[t._v("\n  "+t._s(t.datasetI18n.showing)+" "+t._s(t.showing)+" "+t._s(t.datasetI18n.showingTo)+" "+t._s(t.showingTo)+" "+t._s(t.datasetI18n.showingOf)+"\n  "+t._s(t.dsResultsNumber)+" "+t._s(t.datasetI18n.showingEntries)+"\n")])};d._withStripped=!0;var u=n({render:d,staticRenderFns:[]},void 0,a,void 0,!1,void 0,!1,void 0,void 0,void 0),c={inject:["rdsData","rdsRows","rdsFrom","rdsTo"],props:{tag:{type:String,default:"div"}},computed:{dsRows:function(){return this.rdsRows()},dsData:function(){return this.rdsData()},dsFrom:function(){return this.rdsFrom()},dsTo:function(){return this.rdsTo()},indexes:function(){for(var t=[],e=this.dsFrom;e<this.dsTo;e++)t.push(e);return t}}},h=function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.tag,{tag:"component"},[t._l(t.dsRows,(function(e,s){return[t._t("default",null,{row:t.dsData[e],rowIndex:e,index:t.indexes[s]})]})),t._v(" "),t.dsRows.length?t._e():t._t("noDataFound")],2)};h._withStripped=!0;var f=n({render:h,staticRenderFns:[]},void 0,c,void 0,!1,void 0,!1,void 0,void 0,void 0),l={inject:["datasetI18n","setActive","rdsPages","rdsPagecount","rdsPage"],data:function(){return{morePages:"..."}},computed:{dsPages:function(){return this.rdsPages()},dsPagecount:function(){return this.rdsPagecount()},dsPage:function(){return this.rdsPage()},disabledPrevious:function(){return 1===this.dsPage},disabledNext:function(){return this.dsPage===this.dsPagecount||0===this.dsPagecount}}},v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"pagination"},[s("li",{class:["page-item",t.disabledPrevious&&"disabled"]},[s("a",{staticClass:"page-link",attrs:{href:"#",tabindex:t.disabledPrevious&&"-1","aria-disabled":t.disabledPrevious&&"true"},on:{click:function(e){return e.preventDefault(),t.setActive(1!==t.dsPage&&0!==t.dsPagecount?t.dsPage-1:t.dsPage)}}},[t._v("\n      "+t._s(t.datasetI18n.previous)+"\n    ")])]),t._v(" "),t._l(t.dsPages,(function(e,n){return[s("li",{key:n,class:["page-item",e===t.dsPage&&"active",e===t.morePages&&"disabled"]},[e!==t.morePages?s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.setActive(e)}}},[t._v("\n        "+t._s(e)+"\n      ")]):s("span",{staticClass:"page-link"},[t._v("\n        "+t._s(e)+"\n      ")])])]})),t._v(" "),s("li",{class:["page-item",t.disabledNext&&"disabled"]},[s("a",{staticClass:"page-link",attrs:{href:"#",tabindex:t.disabledNext&&"-1","aria-disabled":t.disabledNext&&"true"},on:{click:function(e){return e.preventDefault(),t.setActive(t.dsPage!==t.dsPagecount&&0!==t.dsPagecount?t.dsPage+1:t.dsPage)}}},[t._v("\n      "+t._s(t.datasetI18n.next)+"\n    ")])])],2)};v._withStripped=!0;var g=n({render:v,staticRenderFns:[]},void 0,l,void 0,!1,void 0,!1,void 0,void 0,void 0),p={inject:["search"],props:{dsSearchPlaceholder:{type:String,default:""},wait:{type:Number,default:0}},data:function(){return{dsSearch:""}},mounted:function(){var t,e,s,n,r=this;this.input=(t=function(t){r.search(t)},e=this.wait,function(){var r=this,i=arguments;clearTimeout(n),s&&!n&&t.apply(r,i),n=setTimeout((function(){n=null,s||t.apply(r,i)}),e)})}},m=function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{staticClass:"form-control",attrs:{type:"text",placeholder:t.dsSearchPlaceholder},domProps:{value:t.dsSearch},on:{input:function(e){return t.input(e.target.value)}}})};m._withStripped=!0;var _=n({render:m,staticRenderFns:[]},void 0,p,void 0,!1,void 0,!1,void 0,void 0,void 0),w={inject:["datasetI18n","showEntries"],props:{dsShowEntries:{type:Number,default:10},dsShowEntriesLovs:{type:Array,default:function(){return[{value:5,text:5},{value:10,text:10},{value:25,text:25},{value:50,text:50},{value:100,text:100}]}}},created:function(){this.showEntries(Number(this.dsShowEntries))},methods:{change:function(t){this.$emit("changed",Number(t.target.value)),this.showEntries(Number(t.target.value))}}},P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-inline"},[s("label",[t._v(t._s(t.datasetI18n.show))]),t._v(" "),s("select",{staticClass:"form-control mr-1 ml-1",domProps:{value:t.dsShowEntries},on:{change:t.change}},t._l(t.dsShowEntriesLovs,(function(e){return s("option",{key:e.value,domProps:{value:e.value}},[t._v("\n      "+t._s(e.text)+"\n    ")])})),0),t._v(" "),s("label",[t._v(t._s(t.datasetI18n.entries))])])};P._withStripped=!0;var b=n({render:P,staticRenderFns:[]},void 0,w,void 0,!1,void 0,!1,void 0,void 0,void 0);t.Dataset=o,t.DatasetInfo=u,t.DatasetItem=f,t.DatasetPager=g,t.DatasetSearch=_,t.DatasetShow=b,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=VueDataset.min.js.map
