(function(l,v){typeof exports=="object"&&typeof module<"u"?v(exports):typeof define=="function"&&define.amd?define(["exports"],v):(l=typeof globalThis<"u"?globalThis:l||self,v(l.VueDataset={}))})(this,function(l){"use strict";const v={show:"Show",entries:"entries",previous:"Previous",next:"Next",showing:"Showing",showingTo:"to",showingOf:"of",showingEntries:"entries"};var g="...";function x(t,e,n){var s;return function(){var r=this,a=arguments;clearTimeout(s),n&&!s&&t.apply(r,a),s=setTimeout(function(){s=null,n||t.apply(r,a)},e)}}function p(t){for(var e in t)return!1;return!0}function E(t,e){var n=2,s=[],r=[],a;if(s.push(1),t<=1)return s;for(var u=e-n;u<=e+n;u++)u<t&&u>1&&s.push(u);s.push(t);for(var i=0;i<s.length;i++)a&&(s[i]-a===2?r.push(a+1):s[i]-a!==1&&r.push(g)),r.push(s[i]),a=s[i];return r}function T(t,e){e===void 0&&(e={});var n=[],s,r=t.length;return t=t.map(function(a,u){return a[0]==="-"?(n[u]=-1,a=a.substring(1)):n[u]=1,a}),function(a,u){for(s=0;s<r;s++){var i=t[s],o=e[i]?e[i](a.value[i]):a.value[i],d=e[i]?e[i](u.value[i]):u.value[i];if(o>d)return n[s];if(o<d)return-n[s]}return 0}}function y(t,e){var n=function(r){t=t.filter(function(a){var u=a.value;for(var i in u)if(i===r){if(typeof e[r]=="function")return e[r](u[i]);if(e[r]===""||u[i]===e[r])return!0}return!1})};for(var s in e)n(s);return t}function D(t,e,n,s){s=String(s).toLowerCase();for(var r in n)if(t.length===0||t.indexOf(r)!==-1){var a=String(n[r]).toLowerCase();for(var u in e)if(u===r&&typeof e[u]=="function"){var i=e[u](a,s,n);if(i===!0)return i}if(a.indexOf(s)>=0)return!0}return!1}var F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._t("default",null,{ds:{dsIndexes:t.indexes,dsShowEntries:t.dsShowEntries,dsResultsNumber:t.dsResultsNumber,dsPage:t.dsPage,dsPagecount:t.dsPagecount,dsFrom:t.dsFrom,dsTo:t.dsTo,dsData:t.dsData,dsRows:t.dsRows,dsPages:t.dsPages,search:t.search,showEntries:t.showEntries,setActive:t.setActive}})],2)},N=[];function f(t,e,n,s,r,a,u,i){var o=typeof t=="function"?t.options:t;e&&(o.render=e,o.staticRenderFns=n,o._compiled=!0),s&&(o.functional=!0),a&&(o._scopeId="data-v-"+a);var d;if(u?(d=function(c){c=c||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!c&&typeof __VUE_SSR_CONTEXT__<"u"&&(c=__VUE_SSR_CONTEXT__),r&&r.call(this,c),c&&c._registeredComponents&&c._registeredComponents.add(u)},o._ssrRegister=d):r&&(d=i?function(){r.call(this,(o.functional?this.parent:this).$root.$options.shadowRoot)}:r),d)if(o.functional){o._injectStyles=d;var _=o.render;o.render=function(ht,R){return d.call(R),_(ht,R)}}else{var h=o.beforeCreate;o.beforeCreate=h?[].concat(h,d):[d]}return{exports:t,options:o}}var C={provide:function(){var e=this;return{search:this.search,showEntries:this.showEntries,setActive:this.setActive,datasetI18n:this.datasetI18n,rdsIndexes:function(){return e.indexes},rdsData:function(){return e.dsData},rdsRows:function(){return e.dsRows},rdsPages:function(){return e.dsPages},rdsResultsNumber:function(){return e.dsResultsNumber},rdsPagecount:function(){return e.dsPagecount},rdsFrom:function(){return e.dsFrom},rdsTo:function(){return e.dsTo},rdsPage:function(){return e.dsPage}}},props:{dsData:{type:Array,default:function(){return[]}},dsFilterFields:{type:Object,default:function(){return{}}},dsSortby:{type:Array,default:function(){return[]}},dsSearchIn:{type:Array,default:function(){return[]}},dsSearchAs:{type:Object,default:function(){return{}}},dsSortAs:{type:Object,default:function(){return{}}}},data:function(){return{dsPage:1,dsSearch:"",dsShowEntries:10,datasetI18n:v,indexes:[]}},computed:{whenChanged:function(){return this.dsData,this.dsSearch,this.dsSortby,this.dsFilterFields,this.dsSearchIn,this.dsSearchAs,this.dsSortAs,Date.now()},dsRows:function(){return this.indexes.slice(this.dsFrom,this.dsTo)},dsPages:function(){return E(this.dsPagecount,this.dsPage)},dsResultsNumber:function(){return this.indexes.length},dsPagecount:function(){return Math.ceil(this.dsResultsNumber/this.dsShowEntries)},dsFrom:function(){return(this.dsPage-1)*this.dsShowEntries},dsTo:function(){return this.dsPage*this.dsShowEntries}},watch:{dsResultsNumber:{handler:function(e,n){this.setActive(1)}},whenChanged:{handler:function(e,n){var s=[],r=this.dsData,a=this.dsSearch,u=this.dsSortby,i=this.dsFilterFields,o=this.dsSearchIn,d=this.dsSearchAs,_=this.dsSortAs;!a&&!u.length&&p(i)?s=r.map(function(h,c){return c}):(s=r.map(function(h,c){return{index:c,value:h}}),p(i)||(s=y(s,i)),a&&(s=s.filter(function(h){return D(o,d,h.value,a)})),u.length&&s.sort(T(u,_)),s=s.map(function(h){return h.index})),this.indexes=s},immediate:!0}},methods:{search:function(e){this.dsSearch=e},showEntries:function(e){var n=this,s=this.dsPages;this.dsShowEntries=e,this.$nextTick(function(){var r=n.dsPages;r.length<s.length&&n.setActive(r[r.length-1])})},setActive:function(e){this.dsPage=e}}},m={},I=f(C,F,N,!1,A,null,null,null);function A(t){for(var e in m)this[e]=m[e]}const j=function(){return I.exports}();var k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" "+t._s(t.datasetI18n.showing)+" "+t._s(t.showing)+" "+t._s(t.datasetI18n.showingTo)+" "+t._s(t.showingTo)+" "+t._s(t.datasetI18n.showingOf)+" "+t._s(t.dsResultsNumber)+" "+t._s(t.datasetI18n.showingEntries)+" ")])},M=[],O={inject:["datasetI18n","rdsResultsNumber","rdsFrom","rdsTo"],computed:{showing:function(){return this.dsResultsNumber!==0?this.dsFrom+1:0},showingTo:function(){return this.dsTo>=this.dsResultsNumber?this.dsResultsNumber:this.dsTo},dsResultsNumber:function(){return this.rdsResultsNumber()},dsFrom:function(){return this.rdsFrom()},dsTo:function(){return this.rdsTo()}}},P={},V=f(O,k,M,!1,L,null,null,null);function L(t){for(var e in P)this[e]=P[e]}const U=function(){return V.exports}();var W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.tag,{tag:"component"},[t._l(t.dsRows,function(s,r){return[t._t("default",null,{row:t.dsData[s],rowIndex:s,index:t.indexes[r]})]}),t.dsRows.length?t._e():t._t("noDataFound")],2)},X=[],z={inject:["rdsData","rdsRows","rdsFrom","rdsTo"],props:{tag:{type:String,default:"div"}},computed:{dsRows:function(){return this.rdsRows()},dsData:function(){return this.rdsData()},dsFrom:function(){return this.rdsFrom()},dsTo:function(){return this.rdsTo()},indexes:function(){for(var e=[],n=this.dsFrom;n<this.dsTo;n++)e.push(n);return e}}},w={},B=f(z,W,X,!1,G,null,null,null);function G(t){for(var e in w)this[e]=w[e]}const q=function(){return B.exports}();var H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"pagination"},[n("li",{class:["page-item",t.disabledPrevious&&"disabled"]},[n("a",{staticClass:"page-link",attrs:{href:"#",tabindex:t.disabledPrevious&&"-1","aria-disabled":t.disabledPrevious&&"true"},on:{click:function(s){return s.preventDefault(),t.setActive(t.dsPage!==1&&t.dsPagecount!==0?t.dsPage-1:t.dsPage)}}},[t._v(" "+t._s(t.datasetI18n.previous)+" ")])]),t._l(t.dsPages,function(s,r){return[n("li",{key:r,class:["page-item",s===t.dsPage&&"active",s===t.morePages&&"disabled"]},[s!==t.morePages?n("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.setActive(s)}}},[t._v(" "+t._s(s)+" ")]):n("span",{staticClass:"page-link"},[t._v(" "+t._s(s)+" ")])])]}),n("li",{class:["page-item",t.disabledNext&&"disabled"]},[n("a",{staticClass:"page-link",attrs:{href:"#",tabindex:t.disabledNext&&"-1","aria-disabled":t.disabledNext&&"true"},on:{click:function(s){return s.preventDefault(),t.setActive(t.dsPage!==t.dsPagecount&&t.dsPagecount!==0?t.dsPage+1:t.dsPage)}}},[t._v(" "+t._s(t.datasetI18n.next)+" ")])])],2)},J=[],Q={inject:["datasetI18n","setActive","rdsPages","rdsPagecount","rdsPage"],data:function(){return{morePages:g}},computed:{dsPages:function(){return this.rdsPages()},dsPagecount:function(){return this.rdsPagecount()},dsPage:function(){return this.rdsPage()},disabledPrevious:function(){return this.dsPage===1},disabledNext:function(){return this.dsPage===this.dsPagecount||this.dsPagecount===0}}},b={},Y=f(Q,H,J,!1,Z,null,null,null);function Z(t){for(var e in b)this[e]=b[e]}const K=function(){return Y.exports}();var tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("input",{staticClass:"form-control",attrs:{type:"text",placeholder:t.dsSearchPlaceholder},domProps:{value:t.dsSearch},on:{input:function(s){return t.input(s.target.value)}}})},et=[],st={inject:["search"],props:{dsSearchPlaceholder:{type:String,default:""},wait:{type:Number,default:0}},data:function(){return{dsSearch:""}},mounted:function(){var e=this;this.input=x(function(n){e.search(n)},this.wait)}},S={},nt=f(st,tt,et,!1,rt,null,null,null);function rt(t){for(var e in S)this[e]=S[e]}const at=function(){return nt.exports}();var it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-inline"},[n("label",[t._v(t._s(t.datasetI18n.show))]),n("select",{staticClass:"form-control mr-1 ml-1",domProps:{value:t.dsShowEntries},on:{change:t.change}},t._l(t.dsShowEntriesLovs,function(s){return n("option",{key:s.value,domProps:{value:s.value}},[t._v(" "+t._s(s.text)+" ")])}),0),n("label",[t._v(t._s(t.datasetI18n.entries))])])},ut=[],ot={inject:["datasetI18n","showEntries"],props:{dsShowEntries:{type:Number,default:10},dsShowEntriesLovs:{type:Array,default:function(){return[{value:5,text:5},{value:10,text:10},{value:25,text:25},{value:50,text:50},{value:100,text:100}]}}},created:function(){this.showEntries(Number(this.dsShowEntries))},methods:{change:function(e){this.$emit("changed",Number(e.target.value)),this.showEntries(Number(e.target.value))}}},$={},dt=f(ot,it,ut,!1,ct,null,null,null);function ct(t){for(var e in $)this[e]=$[e]}const lt=function(){return dt.exports}();l.Dataset=j,l.DatasetInfo=U,l.DatasetItem=q,l.DatasetPager=K,l.DatasetSearch=at,l.DatasetShow=lt,Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=VueDataset.min.js.map
